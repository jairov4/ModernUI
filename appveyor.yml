image: 
  - Visual Studio 2017

install:
  - ps: Start-FileDownload 'https://github.com/ldc-developers/ldc/releases/download/v1.9.0/ldc2-1.9.0-windows-x64.7z' -FileName 'ldc2.7z'
  - 7z x ldc2.7z
  - set PATH=%CD%\ldc2-1.9.0-windows-x64\bin;%PATH%
  - ldc2 --version

build_script:
  - git submodule update --init --recursive
  - msvcEnv x64
  - dub --config=windows
  - dub test --coverage --config=windows

after_test:
  - dub fetch coverd
  - dub run coverd

artifacts:
  - path: coverage.html
    name: Coverage Results
